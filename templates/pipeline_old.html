<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Casey AI Pipeline - Automated Test Generation & Runner</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <i class="fas fa-robot"></i>
            <span>Casey AI</span>
          </div>
          <nav class="nav">
            <a href="/" class="nav-link">Home</a>
            <a href="/pipeline" class="nav-link active">Pipeline</a>
            <a href="#features" class="nav-link">Features</a>
          </nav>
        </div>
      </div>
    </header>

    <!-- Revolutionary Pipeline Section -->
    <section class="pipeline-section">
      
      <!-- Pipeline Hero -->
      <div class="pipeline-hero">
        <div class="container">
          <h1 class="pipeline-title">Casey AI Pipeline</h1>
          <p class="pipeline-subtitle">
            Experience the future of automated testing with our revolutionary AI-powered pipeline
          </p>
        </div>
      </div>

      <!-- Progress Timeline -->
      <div class="progress-timeline">
        <div class="progress-line"></div>
        <div class="progress-active-line"></div>
        <div class="timeline-steps">
          <div class="timeline-step active" data-step="1">
            <div class="step-circle">
              <i class="fas fa-upload"></i>
            </div>
            <div class="step-label">Input Source</div>
          </div>
          <div class="timeline-step" data-step="2">
            <div class="step-circle">
              <i class="fas fa-cogs"></i>
            </div>
            <div class="step-label">Generate Tests</div>
          </div>
          <div class="timeline-step" data-step="3">
            <div class="step-circle">
              <i class="fas fa-globe"></i>
            </div>
            <div class="step-label">Target Website</div>
          </div>
          <div class="timeline-step" data-step="4">
            <div class="step-circle">
              <i class="fas fa-rocket"></i>
            </div>
            <div class="step-label">Execute & Results</div>
          </div>
        </div>
      </div>

      <!-- Main Pipeline Content -->
      <div class="pipeline-content">
        
        <!-- Step 1: Input Selection -->
        <div id="step-1" class="content-card">
          <h2 style="color: #fff; text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 700;">
            Choose Your Input Source
          </h2>
          <p style="color: rgba(255,255,255,0.8); text-align: center; margin-bottom: 3rem; font-size: 1.2rem;">
            Select how you want to generate your test cases
          </p>
          
          <div class="options-grid">
            <div class="option-card" data-input="figma">
              <div class="option-icon">
                <i class="fab fa-figma"></i>
              </div>
              <h3 class="option-title">Figma Design</h3>
              <p class="option-description">
                Generate comprehensive test cases directly from your Figma design files and prototypes
              </p>
            </div>

            <div class="option-card" data-input="document">
              <div class="option-icon">
                <i class="fas fa-file-alt"></i>
              </div>
              <h3 class="option-title">SRS Document</h3>
              <p class="option-description">
                Upload your Software Requirements Specification documents (PDF, DOC, DOCX)
              </p>
            </div>

            <div class="option-card" data-input="manual">
              <div class="option-icon">
                <i class="fas fa-keyboard"></i>
              </div>
              <h3 class="option-title">Manual Input</h3>
              <p class="option-description">
                Describe your testing requirements manually with our intelligent prompt system
              </p>
            </div>

            <div class="option-card" data-input="website">
              <div class="option-icon">
                <i class="fas fa-link"></i>
              </div>
              <h3 class="option-title">Website URL</h3>
              <p class="option-description">
                Analyze and generate tests from existing website structure and functionality
              </p>
            </div>
          </div>

          <!-- Dynamic Form Sections -->
          <div id="figma-form" class="form-section">
            <div class="form-group">
              <label class="form-label">Figma File Key</label>
              <input type="text" class="form-input" placeholder="Enter your Figma file key..." id="figma-key">
            </div>
          </div>

          <div id="document-form" class="form-section">
            <div class="form-group">
              <label class="form-label">Upload Document</label>
              <div class="upload-area" id="file-upload-area">
                <div class="upload-content">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <p><strong>Click to upload</strong> or drag and drop</p>
                  <small>PDF, DOC, DOCX files up to 16MB</small>
                </div>
                <input type="file" id="document-upload" accept=".pdf,.doc,.docx" hidden>
              </div>
            </div>
          </div>

          <div id="manual-form" class="form-section">
            <div class="form-group">
              <label class="form-label">Describe Your Testing Requirements</label>
              <textarea class="form-textarea" rows="6" placeholder="Describe what you want to test, the functionality, user flows, and specific scenarios..." id="manual-prompt"></textarea>
            </div>
          </div>

          <div id="website-form" class="form-section">
            <div class="form-group">
              <label class="form-label">Website URL</label>
              <input type="url" class="form-input" placeholder="https://example.com" id="website-url">
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn-futuristic" onclick="proceedToGeneration()">
              <i class="fas fa-arrow-right"></i> Continue to Generation
            </button>
          </div>
        </div>

        <!-- Step 2: Test Generation -->
        <div id="step-2" class="content-card" style="display: none;">
          <h2 style="color: #fff; text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 700;">
            AI Test Generation
          </h2>
          <p style="color: rgba(255,255,255,0.8); text-align: center; margin-bottom: 3rem; font-size: 1.2rem;">
            Our AI is analyzing your input and generating comprehensive test cases
          </p>
          
          <div class="generation-status">
            <div class="status-item">
              <div class="status-icon">
                <i class="fas fa-brain"></i>
              </div>
              <div class="status-content">
                <h4>AI Analysis</h4>
                <p>Processing your input and understanding requirements...</p>
              </div>
            </div>
            <div class="status-progress">
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn-futuristic btn-secondary" onclick="goBackToStep(1)">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button class="btn-futuristic" id="generate-btn" onclick="generateTestCases()">
              <i class="fas fa-magic"></i> Generate Test Cases
            </button>
          </div>
        </div>

        <!-- Step 3: Target Website -->
        <div id="step-3" class="content-card" style="display: none;">
          <h2 style="color: #fff; text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 700;">
            Target Website Configuration
          </h2>
          <p style="color: rgba(255,255,255,0.8); text-align: center; margin-bottom: 3rem; font-size: 1.2rem;">
            Configure where you want to run your generated test cases
          </p>

          <div class="website-options">
            <div class="website-option">
              <input type="radio" id="use-source-url" name="website-source" value="source" checked>
              <label for="use-source-url" class="option-label">
                <i class="fas fa-link"></i>
                <span>Use Source Website</span>
                <small id="display-source-url">No source URL provided</small>
              </label>
            </div>
            <div class="website-option">
              <input type="radio" id="use-different-url" name="website-source" value="different">
              <label for="use-different-url" class="option-label">
                <i class="fas fa-globe"></i>
                <span>Use Different Website</span>
                <small>Specify a different target URL</small>
              </label>
            </div>
          </div>

          <div id="target-url-section" class="target-url-form" style="display: none;">
            <div class="form-group">
              <label class="form-label">Target Website URL</label>
              <input type="url" class="form-input" placeholder="https://target-website.com" id="target-url">
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn-futuristic btn-secondary" onclick="goBackToStep(2)">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button class="btn-futuristic" onclick="proceedToExecution()">
              <i class="fas fa-rocket"></i> Proceed to Execution
            </button>
          </div>
        </div>

        <!-- Step 4: Execute & Results -->
        <div id="step-4" class="content-card" style="display: none;">
          <h2 style="color: #fff; text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 700;">
            Execute Tests & View Results
          </h2>
          <p style="color: rgba(255,255,255,0.8); text-align: center; margin-bottom: 3rem; font-size: 1.2rem;">
            Launch your test suite and monitor real-time execution results
          </p>

          <div class="execution-summary">
            <div class="summary-item">
              <div class="summary-icon">
                <i class="fas fa-list-ol"></i>
              </div>
              <div class="summary-content">
                <h4>Test Cases: <span id="test-count">0</span></h4>
                <p>Ready for execution</p>
              </div>
            </div>
            <div class="summary-item">
              <div class="summary-icon">
                <i class="fas fa-globe"></i>
              </div>
              <div class="summary-content">
                <h4>Target: <span id="final-target-url">Not set</span></h4>
                <p>Execution environment</p>
              </div>
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn-futuristic btn-secondary" onclick="goBackToStep(3)">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button class="btn-futuristic" id="execute-btn" onclick="executeTests()">
              <i class="fas fa-play"></i> Execute Tests
            </button>
          </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="content-card" style="display: none;">
          <h2 style="color: #fff; text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 700;">
            Test Results
          </h2>
          <div class="results-summary">
            <span class="result-stat passed">
              <i class="fas fa-check-circle"></i> <span id="passed-count">0</span> Passed
            </span>
            <span class="result-stat failed">
              <i class="fas fa-times-circle"></i> <span id="failed-count">0</span> Failed
            </span>
          </div>
          <div id="test-results-list" class="test-results">
            <!-- Results will be populated here -->
          </div>
        </div>
        
      </div>
    </section>
          <!-- Step 1: Input Source Selection -->
          <div id="step-1" class="pipeline-step active">
            <div class="step-card">
              <div class="step-header">
                <h3><i class="fas fa-upload"></i> Choose Input Source</h3>
                <p>Select how you want to generate test cases</p>
              </div>

              <div class="input-options">
                <div class="input-option" data-input="figma">
                  <div class="option-icon">
                    <i class="fab fa-figma"></i>
                  </div>
                  <div class="option-content">
                    <h4>Figma Design</h4>
                    <p>Generate tests from Figma file key</p>
                  </div>
                  <div class="option-check">
                    <i class="fas fa-check"></i>
                  </div>
                </div>

                <div class="input-option" data-input="document">
                  <div class="option-icon">
                    <i class="fas fa-file-alt"></i>
                  </div>
                  <div class="option-content">
                    <h4>SRS Document</h4>
                    <p>Upload PDF, DOC, or DOCX files</p>
                  </div>
                  <div class="option-check">
                    <i class="fas fa-check"></i>
                  </div>
                </div>

                <div class="input-option" data-input="manual">
                  <div class="option-icon">
                    <i class="fas fa-keyboard"></i>
                  </div>
                  <div class="option-content">
                    <h4>Manual Prompt</h4>
                    <p>Describe your requirements manually</p>
                  </div>
                  <div class="option-check">
                    <i class="fas fa-check"></i>
                  </div>
                </div>

                <div class="input-option" data-input="website">
                  <div class="option-icon">
                    <i class="fas fa-link"></i>
                  </div>
                  <div class="option-content">
                    <h4>Website URL</h4>
                    <p>Analyze existing website structure</p>
                  </div>
                  <div class="option-check">
                    <i class="fas fa-check"></i>
                  </div>
                </div>
              </div>

              <!-- Input Forms -->
              <div class="input-forms">
                <!-- Figma Input -->
                <div id="figma-form" class="input-form">
                  <div class="form-group">
                    <label for="figma-key">Figma File Key</label>
                    <input
                      type="text"
                      id="figma-key"
                      placeholder="Enter your Figma file key..."
                      class="form-input"
                    />
                    <small class="form-hint"
                      >Find the file key in your Figma file URL</small
                    >
                  </div>
                </div>

                <!-- Document Input -->
                <div id="document-form" class="input-form">
                  <div class="form-group">
                    <label for="document-upload">Upload SRS Document</label>
                    <div class="file-upload-area" id="file-upload-area">
                      <input
                        type="file"
                        id="document-upload"
                        accept=".pdf,.doc,.docx"
                        class="file-input"
                      />
                      <div class="upload-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>
                          Drag & drop your file here or
                          <span class="upload-link">browse</span>
                        </p>
                        <small>Supports PDF, DOC, DOCX files (max 16MB)</small>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Manual Input -->
                <div id="manual-form" class="input-form">
                  <div class="form-group">
                    <label for="manual-prompt">Manual Requirements</label>
                    <textarea
                      id="manual-prompt"
                      placeholder="Describe your testing requirements in detail..."
                      class="form-textarea"
                    ></textarea>
                    <small class="form-hint"
                      >Provide detailed requirements for AI to generate relevant
                      test cases</small
                    >
                  </div>
                </div>

                <!-- Website Input -->
                <div id="website-form" class="input-form">
                  <div class="form-group">
                    <label for="source-website-url"
                      >Website URL for Analysis</label
                    >
                    <input
                      type="url"
                      id="source-website-url"
                      placeholder="https://example.com"
                      class="form-input"
                    />
                    <small class="form-hint"
                      >URL of the website to analyze for test generation</small
                    >
                  </div>
                </div>
              </div>

              <div class="step-actions">
                <button class="btn btn-primary" onclick="proceedToGeneration()">
                  <i class="fas fa-arrow-right"></i>
                  Proceed to Generation
                </button>
              </div>
            </div>
          </div>

          <!-- Step 2: Generate Test Cases -->
          <div id="step-2" class="pipeline-step">
            <div class="step-card">
              <div class="step-header">
                <h3><i class="fas fa-cogs"></i> Generate Test Cases</h3>
                <p>
                  AI is analyzing your input and generating comprehensive test
                  cases
                </p>
              </div>

              <div class="generation-status">
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-brain"></i>
                  </div>
                  <div class="status-content">
                    <h4>AI Analysis</h4>
                    <p>Analyzing input source...</p>
                  </div>
                  <div class="status-progress">
                    <div class="progress-bar">
                      <div class="progress-fill" style="width: 0%"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="step-actions">
                <button class="btn btn-secondary" onclick="goBackToStep(1)">
                  <i class="fas fa-arrow-left"></i>
                  Back
                </button>
                <button
                  class="btn btn-primary"
                  onclick="generateTestCases()"
                  id="generate-btn"
                >
                  <i class="fas fa-magic"></i>
                  Generate Test Cases
                </button>
              </div>
            </div>
          </div>

          <!-- Step 3: Target Website -->
          <div id="step-3" class="pipeline-step">
            <div class="step-card">
              <div class="step-header">
                <h3><i class="fas fa-globe"></i> Target Website</h3>
                <p>Specify where you want to run the generated test cases</p>
              </div>

              <div class="website-options">
                <div class="website-option">
                  <input
                    type="radio"
                    id="use-source-url"
                    name="website-source"
                    value="source"
                    checked
                  />
                  <label for="use-source-url" class="option-label">
                    <div class="option-icon">
                      <i class="fas fa-link"></i>
                    </div>
                    <div class="option-content">
                      <h4>Use Source Website</h4>
                      <p>Use the same website from test generation</p>
                      <div class="source-url-display" id="source-url-display">
                        <i class="fas fa-globe"></i>
                        <span id="display-source-url"
                          >No source URL available</span
                        >
                      </div>
                    </div>
                  </label>
                </div>

                <div class="website-option">
                  <input
                    type="radio"
                    id="use-different-url"
                    name="website-source"
                    value="different"
                  />
                  <label for="use-different-url" class="option-label">
                    <div class="option-icon">
                      <i class="fas fa-external-link-alt"></i>
                    </div>
                    <div class="option-content">
                      <h4>Different Website</h4>
                      <p>Specify a different website URL</p>
                    </div>
                  </label>
                </div>
              </div>

              <div
                class="target-url-form"
                id="target-url-form"
                style="display: none"
              >
                <div class="form-group">
                  <label for="target-website-url">Target Website URL</label>
                  <input
                    type="url"
                    id="target-website-url"
                    placeholder="https://example.com"
                    class="form-input"
                  />
                  <small class="form-hint"
                    >URL where test cases will be executed</small
                  >
                </div>
              </div>

              <div class="testing-options">
                <div class="testing-option">
                  <label class="toggle-label">
                    <input
                      type="checkbox"
                      id="live-testing-toggle"
                      class="toggle-input"
                    />
                    <span class="toggle-slider"></span>
                    <div class="toggle-content">
                      <h4>Live Testing Mode</h4>
                      <p>
                        Execute tests on live website with real-time monitoring
                      </p>
                    </div>
                  </label>
                </div>
              </div>

              <div class="step-actions">
                <button class="btn btn-secondary" onclick="goBackToStep(2)">
                  <i class="fas fa-arrow-left"></i>
                  Back
                </button>
                <button class="btn btn-primary" onclick="proceedToExecution()">
                  <i class="fas fa-arrow-right"></i>
                  Setup Execution
                </button>
              </div>
            </div>
          </div>

          <!-- Step 4: Execute Tests -->
          <div id="step-4" class="pipeline-step">
            <div class="step-card">
              <div class="step-header">
                <h3><i class="fas fa-play"></i> Execute Test Cases</h3>
                <p>Running comprehensive test suite on your target website</p>
              </div>

              <div class="execution-summary">
                <div class="summary-item">
                  <div class="summary-icon">
                    <i class="fas fa-list"></i>
                  </div>
                  <div class="summary-content">
                    <h4>Test Cases Ready</h4>
                    <p><span id="test-count">0</span> test cases generated</p>
                  </div>
                </div>
                <div class="summary-item">
                  <div class="summary-icon">
                    <i class="fas fa-globe"></i>
                  </div>
                  <div class="summary-content">
                    <h4>Target Website</h4>
                    <p id="final-target-url">-</p>
                  </div>
                </div>
                <div class="summary-item">
                  <div class="summary-icon">
                    <i class="fas fa-bolt"></i>
                  </div>
                  <div class="summary-content">
                    <h4>Execution Mode</h4>
                    <p id="execution-mode">Standard</p>
                  </div>
                </div>
              </div>

              <div class="step-actions">
                <button class="btn btn-secondary" onclick="goBackToStep(3)">
                  <i class="fas fa-arrow-left"></i>
                  Back
                </button>
                <button
                  class="btn btn-primary"
                  onclick="executeTests()"
                  id="execute-btn"
                >
                  <i class="fas fa-rocket"></i>
                  Launch Test Execution
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="results-section" style="display: none">
          <div class="results-header">
            <h4>Test Execution Results</h4>
            <div class="results-summary">
              <span class="result-stat passed">
                <i class="fas fa-check-circle"></i>
                <span id="passed-count">0</span> Passed
              </span>
              <span class="result-stat failed">
                <i class="fas fa-times-circle"></i>
                <span id="failed-count">0</span> Failed
              </span>
            </div>
          </div>
          <div id="test-results-list" class="test-results">
            <!-- Test results will appear here -->
          </div>
        </div>
      </div>
      <!-- End Pipeline Container Wrapper -->
    </div>
    </section>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <p id="loading-text">Processing...</p>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
